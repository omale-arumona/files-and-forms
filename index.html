<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Files and Forms</title>
    <style>
        *,
        html,
        body,
        ::before,
        ::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .container {
            min-width: 100vw;
            min-height: 715px;
            margin-top: 0;
            margin-bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: midnightblue;
        }

        .form {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: wheat;
            min-height: 50vh;
            min-width: 50vw;
            padding: 20px;
            /* margin-top: 100px; */
            flex-wrap: wrap;
            border-radius: 10px;
        }

        div {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            margin-bottom: 10px;
            margin-top: 10px;
        }

        input {
            width: 25vw;
        }

        #nameAlert,
        #emailAlert,
        #phoneAlert,
        #successAlert,
        .firstSA,
        .lastSA,
        .otherSA {
            background: white;
            color: red;
        }

        .firstNameAlert,
        .otherNameAlert,
        .lastNameAlert {
            font-size: 12px;
            color: red;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="firstSA"></div>
        <div class="lastSA"></div>
        <div class="otherSA"></div>
        <div id="nameAlert"></div>
        <div id="successAlert"></div>
        <div id="emailAlert"></div>
        <div id="phoneAlert"></div>
        <form action="/submit" class="form" method="">
            <div><a href="https://github.com/omale-arumona/files-and-forms">My GitHub Repo:
                    https://github.com/omale-arumona/files-and-forms </a></div>
            <div>
                <label for="firstName" class="firstName">First Name</label>
                <input type="text" class="firstName" id="firstName" name='firstName'
                    placeholder="first name must not contain numbers!!!" required>
                <span class="firstNameAlert"></span>
            </div>
            <div>
                <label for="lastName" class="lastName">Last Name</label>
                <input type="text" class="lastName" id="lastName" name='lastName'
                    placeholder="last name must not contain numbers!!!" required>
                <span class="lastNameAlert"></span>
            </div>
            <div>
                <label for="otherNames" class="otherNames">Other Names (optional)</label>
                <input type="text" class="otherNames" id="otherNames" name='otherNames'
                    placeholder="name must not contain numbers!!!">
                <span class="otherNameAlert"></span>
            </div>
            <div>
                <label for="emailAddress" class="emailAddress">Email</label>
                <input type="email" class="emailAddress" id="emailAddress" name='emailAddress' required>
            </div>
            <div>
                <label for="phoneNumber" class="phoneNumber">Phone Number</label>
                <input type="text" class="phoneNumber" id="phoneNumber" name='phoneNumber'>
            </div>
            <div>
                <label for="gender" class="gender">Gender</label>
                <select name="gender" id="gender" required>
                    <option value="male">male</option>
                    <option value="female">female</option>
                </select>
            </div>
            <div>
            </div>
        </form>
        <button type="submit" id="submit">submit</button>
    </div>
    <script>
        // Select Elements
        let firstName = document.getElementById('firstName');
        let lastName = document.getElementById('lastName');
        let otherNames = document.getElementById('otherNames');
        let phoneNumber = document.getElementById('phoneNumber');
        let emailAddress = document.getElementById('emailAddress');
        let nameAlert = document.getElementById('nameAlert');
        let emailAlert = document.getElementById('emailAlert');
        let phoneAlert = document.getElementById('phoneAlert');
        let successAlert = document.getElementById('successAlert');
        let submit = document.getElementById('submit');
        let firstNameAlert = document.querySelector(".firstNameAlert");
        let lastNameAlert = document.querySelector(".lastNameAlert");
        let otherNameAlert = document.querySelector(".otherNameAlert");
        let firstSA = document.querySelector(".firstSA");
        let lastSA = document.querySelector(".lastSA");
        let otherSA = document.querySelector(".otherSA");

        // Check first name inputs
        firstName.addEventListener('keydown', (e) => {

            if (e.key === "0" || e.key === "1" || e.key === "2" || e.key === "3" || e.key === "4" || e.key === "5" || e.key === "6" || e.key === "7" || e.key === "8" || e.key === "9") {

                firstName.style.outline = "2px solid red";
                firstNameAlert.textContent = "First name must not contain numbers!!!";

                setTimeout(() => {
                    firstName.style.outline = "";
                    firstNameAlert.textContent = "";
                }, 3000);

            }
        });

        //Check last name inputs
        lastName.addEventListener('keydown', (e) => {

            if (e.key === "0" || e.key === "1" || e.key === "2" || e.key === "3" || e.key === "4" || e.key === "5" || e.key === "6" || e.key === "7" || e.key === "8" || e.key === "9") {

                lastName.style.outline = "2px solid red";
                lastNameAlert.textContent = "Last name must not contain numbers!!!";

                setTimeout(() => {
                    lastName.style.outline = "";
                    lastNameAlert.textContent = "";
                }, 3000);
            }
        });

        //Check other names input
        otherNames.addEventListener('keydown', (e) => {

            if (e.key === "0" || e.key === "1" || e.key === "2" || e.key === "3" || e.key === "4" || e.key === "5" || e.key === "6" || e.key === "7" || e.key === "8" || e.key === "9") {

                otherNames.style.outline = "2px solid red";
                otherNameAlert.textContent = "Other names must not contain numbers!!!";

                setTimeout(() => {
                    otherNames.style.outline = "";
                    otherNameAlert.textContent = "";
                }, 3000);
            }
        });

        //Check what you are submitting
        submit.addEventListener('click', (e) => {
            if (firstName.value.length < 1 || lastName.value.length < 1 || otherNames.value.length < 1) {
                e.preventDefault();
                nameAlert.textContent = "Length of name must be more than one character!!!";
                setTimeout(() => {
                    nameAlert.textContent = "";
                }, 3000);
            }

            if (!emailAddress.value.includes("@") || !emailAddress.value.includes(".")) {
                e.preventDefault();
                emailAlert.textContent = `Email Address must contain '@' and '.' characters!!!`;
                setTimeout(() => {
                    emailAlert.textContent = "";
                }, 3000);
            }

            if (phoneNumber.value.length > 11) {
                e.preventDefault();
                phoneAlert.textContent = "Length of phone number must be a max of eleven characters or less!!!";
                setTimeout(() => {
                    phoneAlert.textContent = "";
                }, 3000);
            }

            let firstNameVariable = firstName.value.includes("0") || firstName.value.includes("1") || firstName.value.includes("2") || firstName.value.includes("3") || firstName.value.includes("4") || firstName.value.includes("5") || firstName.value.includes("6") || firstName.value.includes("7") || firstName.value.includes("8") || firstName.value.includes("9");

            let lastNameVariable = lastName.value.includes("0") || lastName.value.includes("1") || lastName.value.includes("2") || lastName.value.includes("3") || lastName.value.includes("4") || lastName.value.includes("5") || lastName.value.includes("6") || lastName.value.includes("7") || lastName.value.includes("8") || lastName.value.includes("9");

            let otherNamesVariable = otherNames.value.includes("0") || otherNames.value.includes("1") || otherNames.value.includes("2") || otherNames.value.includes("3") || otherNames.value.includes("4") || otherNames.value.includes("5") || otherNames.value.includes("6") || otherNames.value.includes("7") || otherNames.value.includes("8") || otherNames.value.includes("9");

            if (firstNameVariable) {
                e.preventDefault();
                firstSA.textContent = "First name must not contain numbers!!!";
                setTimeout(() => {
                    firstSA.textContent = "";
                }, 3000);
            }

            if (lastNameVariable) {
                e.preventDefault();
                lastSA.textContent = "Last name must not contain numbers!!!";
                setTimeout(() => {
                    lastSA.textContent = "";
                }, 3000);
            }

            if (otherNamesVariable) {
                e.preventDefault();
                otherSA.textContent = "Other names must not contain numbers!!!";
                setTimeout(() => {
                    otherSA.textContent = "";
                }, 3000);
            }


            if (firstName.value.length >= 1 && lastName.value.length >= 1 && otherNames.value.length >= 1 && emailAddress.value.includes("@") && emailAddress.value.includes(".") && phoneNumber.value.length <= 11 && !firstNameVariable && !lastNameVariable && !otherNamesVariable) {
                successAlert.textContent = "Submitted successfully!!!";
                setTimeout(() => {
                    successAlert.textContent = "";
                }, 3000);

                getData();
            }

            async function getData() {
                try {
                    let response = await fetch("/data");
                    let data = await response.json();
                    console.log(data);
                } catch (error) {
                    console.log(error);
                }
            }
        })
    </script>
</body>

</html>